(function(t){function e(e){for(var o,a,i=e[0],l=e[1],c=e[2],p=0,f=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&f.push(n[a][0]),n[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],o=!0,i=1;i<s.length;i++){var l=s[i];0!==n[l]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var o={},n={app:0},r=[];function a(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=o,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(s,o,function(e){return t[e]}.bind(null,o));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/review/another_frontend/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var o=s("85ec"),n=s.n(o);n.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),n=(s("d3b7"),s("bc3a")),r=s.n(n),a={},i=r.a.create(a);i.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=i,window.axios=i,Object.defineProperties(t.prototype,{axios:{get:function(){return i}},$axios:{get:function(){return i}}})},o["a"].use(Plugin);Plugin;var l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"app"}},[t._v(" - "),s("div",{class:"alert alert-"+t.flash_type,attrs:{id:"flash_container"}},[s("h2",[t._v(t._s(t.flash_message))])]),s("div",{staticClass:"row alert",attrs:{id:"letter_container"}},[s("h2",[t._v(t._s(t.letter.greeting))]),s("br"),s("p",[t._v(t._s(t.letter.content))]),t._m(0),s("p",{attrs:{id:"signature"}},[t._v(t._s(t.letter.signature))]),s("br"),s("div",{staticClass:"col-sm-8 col-sm-offset-2"},[s("img",{staticClass:"col-sm-8 col-sm-offset-2",staticStyle:{},attrs:{src:t.letter.imageUrl}})])]),s("div",{staticClass:"row alert",attrs:{id:"buttons"}},[s("button",{staticClass:"btn btn-success col-xs-6 col-sm-3 col-sm-offset-2",attrs:{id:"approve",disabled:t.block_button},on:{click:t.approve}},[t._v(" Approve ")]),s("button",{staticClass:"btn btn-danger col-xs-6 col-sm-3 col-sm-offset-2",attrs:{id:"deny",disabled:t.block_button},on:{click:t.deny}},[t._v(" Deny ")])]),s("div",{class:t.login_hide,attrs:{id:"login_overlay"}},[s("div",{staticClass:"row alert alert-info col-xs-12 \n      col-xs-offset-0 col-sm-6 col-sm-offset-3",attrs:{id:"login_form"}},[s("form",[s("div",{staticClass:"alert alert-danger",class:t.login_error_hide},[t._v(" "+t._s(t.login_error)+" ")]),s("p",[t._v("Bienvenue !")]),s("div",{staticClass:"form-group col-sm-12"},[s("label",{attrs:{for:"pseudo"}},[t._v("Votre pseudo : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username",name:"username",id:"pseudo"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),s("br")]),s("div",{staticClass:"form-group col-sm-12"},[s("label",{attrs:{for:"pass"}},[t._v("Votre mot de passe : ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Password",name:"password",id:"pass"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("input",{staticClass:"btn btn-success",attrs:{type:"submit",disabled:t.block_button,value:"S'identifier"},on:{click:t.login}})])])])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("br")])}],u={name:"App",data:function(){return{flash_message:"Letter is loading .... ",flash_type:"info",block_button:"",loading_letter:{id:-1,type:"",greeting:"",content:"Loading ...",signature:"",imageUrl:""},letter:{},username:"",password:"",login_hide:"hide",login_error:"",login_error_hide:"hide"}},mounted:function(){var t=this;this.letter=this.loading_letter,this.axios.defaults.baseURL="http://localhost:3000",this.axios.defaults.withCredentials=!0,this.axios.interceptors.response.use((function(e){return 401!==e.status&&302!==e.status||t.showLogin(),e}),(function(e){return void 0==e.response||401!==e.response.status&&302!==e.response.status||t.showLogin(),Promise.reject(e)})),this.fetchNext()},methods:{fetchNext:function(){var t=this;this.letter=this.loading_letter,this.flash_message="Letter is loading .... ",this.flash_type="info",this.block_button=!0,this.axios.get("/review/fetch").then((function(e){e.data.exists?(t.flash_message="Load Successful",t.flash_type="success",t.letter=e.data,t.block_button=!1):(t.flash_message="Aucune lettre à contrôler",t.flash_type="success",t.letter.content="",setTimeout((function(){t.fetchNext()}),36e4))})).catch((function(e){console.log(e),t.flash_message=e,t.flash_type="danger",t.block_button=!1}))},sendApprovalResult:function(t,e){var s=this;this.block_button=!0,this.flash_message="Approval sending ... ",this.flash_type="info",this.axios.post("/review/approve",{id:this.letter.id,approve:e,flag:t}).then((function(t){s.flash_message="Approval Success - Loading Next ...",s.flash_type="success",s.block_button=!1})).catch((function(t){console.log(t),s.flash_message="Error while approving  : "+t,s.flash_type="danger",s.block_button=!1})),this.fetchNext()},approve:function(){this.sendApprovalResult("flag",!0)},deny:function(){this.sendApprovalResult("flag",!1)},login:function(){var t=this;this.block_button=!0,this.axios.post("/login",{username:this.username,password:this.password}).then((function(e){t.password="",t.login_hide="hide",t.block_button=!1,t.fetchNext()})).catch((function(e){console.log(e),t.flash_message=e,t.flash_type="danger",401===e.response.status?t.login_error=e.response.data:t.login_error=e,t.block_button=!1,t.login_error_hide=""}))},showLogin:function(){this.login_hide=""}}},p=u,f=(s("034f"),s("2877")),d=Object(f["a"])(p,l,c,!1,null,null,null),h=d.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(h)}}).$mount("#app")},"85ec":function(t,e,s){}});
//# sourceMappingURL=app.fa49ba38.js.map